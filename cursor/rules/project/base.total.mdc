---
alwaysApply: false
---
项目级别规则总结
一、技术栈约束
核心框架与工具
Vue 版本: Vue 3.5.16，使用 Composition API
构建工具: Vite 6.3.5
状态管理: Pinia 3.0.2，使用 pinia-plugin-persistedstate 持久化
UI 框架: Element Plus 2.10.7
路由: Vue Router 4.5.1
HTTP 客户端: Axios 1.9.0
样式预处理: SCSS (sass-embedded)
自动导入配置
使用 unplugin-auto-import 自动导入 Vue、Vue Router、Pinia API
使用 unplugin-vue-components 自动导入 Element Plus 组件
模板中可直接使用 ref, reactive, computed, watch, onMounted 等，无需手动导入
二、代码风格规范
组件编写规范
优先使用 <script setup> 语法（Composition API）
允许使用 Options API（兼容现有代码）
新组件必须使用 <script setup>
组件名使用 PascalCase（如 AddPatient.vue, PatientDetail.vue）
命名规范
变量/函数: camelCase（如 formInline, handleEdit, usersList）
组件/类型: PascalCase（如 AddPatient, PatientDetail）
常量: UPPER_SNAKE_CASE（如 VITE_APP_BASE_API）
API 函数: camelCase，动词开头（如 usersList, usersAdd, usersEdit, usersDelete）
文件组织规范
API 文件: src/api/，按业务模块拆分，使用 index.js 统一导出
组件: src/components/，按功能组织子目录
视图: src/views/，按业务模块组织（如 business/, system/, ai/）
工具函数: src/utils/，通用工具统一管理
Store: src/store/modules/，按功能模块拆分
三、API 调用规范
API 文件结构
// 统一使用 http 对象的方法import { http } from "@/utils/request";// 列表查询export const usersList = params => {  return http.get({    url: `users`,    params,  });};// 新增export const usersAdd = data => {  return http.post({    url: `users`,    data,  });};// 编辑（使用 PUT，URL 包含 ID）export const usersEdit = data => {  return http.put({    url: `users/${data.id}`,    data,  });};// 删除（使用 DELETE，URL 包含 ID）export const usersDelete = data => {  return http.delete({    url: `users/${data.id}`,    data,  });};
统一导出
所有 API 文件在 src/api/index.js 中统一导出
使用 export * from './module' 方式
四、状态管理规范
Pinia Store 结构
import { defineStore } from 'pinia'const useUserStore = defineStore("user", {  state: () => ({    // 状态定义  }),  actions: {    // 异步操作  },  persist: {    // 持久化配置    omit: ["token", "refresh_token"],  },});export default useUserStore;
Store 使用
Store 命名以 use 开头（如 useUserStore, useAppStore）
在组件中使用 defineStore 返回的 store 函数
敏感信息（如 token）不持久化
五、路由配置规范
路由结构
公共路由定义在 constantRoutes 中
路由配置包含 meta 字段：title, icon, noCache, breadcrumb, activeMenu
使用路由懒加载：component: () => import("@/views/xxx")
隐藏路由设置 hidden: true
六、样式规范
SCSS 使用
全局样式: src/assets/styles/
使用变量文件: variables.module.scss
使用 mixin: mixin.scss
组件样式使用 <style lang="scss" scoped>
七、工具函数规范
全局方法挂载
在 main.js 中通过 app.config.globalProperties 挂载常用方法
已挂载方法：parseTime, resetForm, handleTree, addDateRange, selectDictLabel, useDict, download
工具函数组织
通用工具: src/utils/hxsy.js
业务工具: 按模块组织
工具函数使用 JSDoc 注释
八、组件使用规范
全局组件
已注册全局组件：DictTag, Pagination, FileUpload, ImageUpload, ImagePreview, RightToolbar, Editor, svg-icon
新组件如需全局使用，在 main.js 中注册
自定义组件
表格组件: ly-table（自定义表格组件）
分页组件: Pagination 或 HxsyPagination
上传组件: FileUpload, ImageUpload
九、请求拦截规范
请求配置
Base URL: 通过 VITE_APP_BASE_API 环境变量配置
超时时间: 10000ms
自动添加 Authorization header（Bearer token）
GET 请求参数自动转换为 URL 参数
POST/PUT 请求自动防重复提交（1秒内）
响应处理
统一错误码处理：200 成功，401 未授权，500 服务器错误，601 警告
401 自动处理 token 刷新
错误消息统一通过 Element Plus 的 ElMessage 或 ElNotification 展示
十、国际化规范
i18n 配置
使用 vue-i18n 进行国际化
语言文件: src/lang/zh_CN.js, src/lang/en_US.js
Element Plus 语言包: element-plus/es/locale/lang/zh-cn
十一、开发环境配置
开发服务器
端口: 99
自动打开浏览器
代理配置: /dev-api 代理到后端 API
构建配置
输出目录: dist
资源目录: assets
代码分割: 自动分包
生产环境不生成 sourcemap
十二、Git 提交规范
提交信息格式
遵循 Conventional Commits
使用简体中文
格式: <type>(<scope>): <subject>
Type: feat, fix, docs, style, refactor, perf, test, chore, revert
十三、代码质量要求
必须处理
加载状态
空数据状态
异常状态
防止白屏或运行时错误
禁止事项
禁止使用 any 类型（如使用 TypeScript）
禁止硬编码配置（使用环境变量）
禁止在组件中直接操作 DOM（使用 Vue 响应式）
十四、特殊功能规范
权限控制
使用指令: v-hasPermi, v-hasRole
路由权限: 通过 roles 和 permissions 字段控制
文件上传
使用统一的 FileUpload 或 ImageUpload 组件
支持预览功能
字典管理
使用 DictTag 组件展示字典值
使用 useDict 获取字典数据